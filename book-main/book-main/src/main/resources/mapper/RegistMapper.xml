<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.regist.RegistMapper">
 
  <select id="getDae" resultType="com.example.demo.regist.DaeDto">
    select * from dae code order by id asc
  </select>
  <select id="getSo" resultType="com.example.demo.regist.SoDto">
    select * from so where daecode=#{daecode} order by id asc
  </select>
  
  <select id="getPcode" resultType="Integer">
     select ifnull( max(right(pcode,3)) , 0) 
     from product
     where pcode like concat(#{pcode} , '%')
  </select>
  
  <insert id="registBookOk" parameterType="com.example.demo.regist.ProductDto">
    insert into product(pcode,pimg,dimg,title,price,halin,su,baeprice,baeday,juk,writeday)
    values(#{pcode},#{pimg},#{dimg},#{title},#{price},#{halin},#{su},#{baeprice},#{baeday},#{juk},now()) 
  </insert>

 <select id="registProduct" resultType="com.example.demo.dto.ProductDto">
    select * from product
    order by id desc
  </select>
  
<delete id="delBook">
  delete from product where pcode=#{pcode}
</delete>
</mapper>